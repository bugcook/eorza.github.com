---
layout: post
title: 挤得要命
slug: so-crowd
date: 2012-05-02 09:11:48 +0800
categories:
- note
tags:
- js
- qd
---

前天去海边走一走，发现人太多了，挤得要命。大部分是旅行团的人，前面有一个带队的，拿着小喇叭。他们玩的好辛苦。我想，以后要出去还是选人少一点的地方比较好。

前两天一直在考虑2个问题：事件驱动和js的原型链。明显是研究nodejs的过程中产生的问题。nodejs是朋友介绍的，据说很厉害，所以就研究一下，发现js的原型真的跟普通的面向对象有很大的区别。下面写一下我对这两个东西的理解，或许错了，但是也要记录下来。所有的东西都是回忆。

关于JS的原型链。在理解这个东西的时候，把函数分解成两个部分，一个是函数，一个是对象。一定要分离着理解，上张图，绝对给力，我就是靠这张图理解的。

<img src="{{ site.path.uploads }}2012/05/02/so-crowd/JavaScript_Object_Layout.jpg" alt="JavaScript Object Layout" />

仔细研究这个图，你一定有收获。还有网上还有这么一张图，我相信你看后绝对会很混乱，这张图我放在下面，大家研究一下，反正我是搞不懂。

<img src="{{ site.path.uploads }}2012/05/02/so-crowd/instance.png" alt="siemon的图" />

这个叫siemon的人绝对技术很牛逼，但是当老师就一般了。

关于事件驱动。看了好多人的博客啊教程啊什么的，说要实现事件驱动用php什么的。当然用php也是可以的，你不光要用的回调函数，也要写一个死循环来拾取和执行事件的handler。其实事件驱动就是有一个死循环来不断的接受事件队列的事件，然后根据相应的对策来处理它。处理完了怎么办？那就需要用的回调函数来，执行提供的函数即可。nodejs的阻塞和非阻塞的问题，是用事件驱动和回调来实现的。如果还是很不理解，那么可以去看看汇编语言中的中断，跟这个类似，在单片机中，很多都是用中断来实现事件驱动的，说起来事件驱动只是一种编程范式。

所以，事件驱动、回调函数、阻塞和非阻塞是三个不同的东西，分别去理解这三个东西就可以了。比如在计算机的中断上，只有回调和阻塞的概念，没有事件驱动的概念，因为没有事件队列。中段中的中断地址指向的代码就是回调函数。
